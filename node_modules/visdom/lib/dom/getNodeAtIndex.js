"use strict";

function getNodeAtIndex(rootNode, treeIndex) {
  if (treeIndex === 0) {
    return rootNode;
  }

  var childCount = rootNode.childNodes.length;

  if (treeIndex - 1 < childCount) {
    return rootNode.childNodes[treeIndex - 1];
  }

  var childNode = void 0;
  var i = 0;
  var prevSum = 0;

  for (; i < childCount; i += 1) {
    var scopeIndex = treeIndex - childCount - prevSum + i;

    childNode = rootNode.childNodes[i];

    var ret = getNodeAtIndex(rootNode.childNodes[i], scopeIndex);

    if (ret !== null) {
      return ret;
    }

    prevSum += childNode.childNodes.length + 1;
  }

  return null;
}

module.exports = getNodeAtIndex;