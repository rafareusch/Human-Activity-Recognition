'use strict';

var domProps = require('./dom/props');

function toPropsHTML(name) {
  var props = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

  var propKeys = Object.keys(props);

  if (!propKeys.length) {
    return '';
  }

  // eslint-disable-next-line prefer-template
  return ' ' + propKeys.filter(function (prop) {
    return !!domProps[prop];
  }).map(function (prop) {
    return domProps[prop] + '="' + props[prop] + '"';
  }).join(' ');
}

function toHTML(node) {
  var text = typeof node === 'string' ? node : null;

  if (text) {
    return text;
  }

  var name = node.name;
  var children = node.children;
  var data = node.data;


  var props = Object.assign({}, data);

  return '<' + name + toPropsHTML(name, props) + '>' + (children ? children.map(toHTML).join('') : '') + '</' + name + '>';
}

module.exports = toHTML;